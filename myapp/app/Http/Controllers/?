<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Models\ImgPath;
use  App\Services\HomePage\HomePageService;
use App\Models\Product;
class HomeController extends Controller
{
   private $homePageService;
   public function __construct(HomePageService $homePageService){
       $this->homePageService = $homePageService;
   }

    public function getDataHomePage(Request $r){
     //отдаем
  //   $image = ImgPath::with('productConnect')->get();
     $products = $this->homePageService->getProducts();
     return response()->api($products);
    }

    public function search(Request $r){
      $data = $r->input('search');
      $product = Product::query()->with('img_Connect')->get();

      return response()->api(['product'=>$product->toArray()]);
    }
}
